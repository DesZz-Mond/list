<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∏—Å—Ç–µ–º–∞ –°—Ç—É–¥–µ–Ω—Ç–∞ 2026 | –†–µ—î—Å—Ç—Ä —Ç–∞ –†–æ–∑–∫–ª–∞–¥</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #fbfbf9; }
        .custom-scroll::-webkit-scrollbar { height: 6px; width: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: #f1f1f1; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #d6d3d1; border-radius: 10px; }
        .schedule-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem; }
        .day-card { transition: all 0.3s ease; }
        .day-card:hover { transform: translateY(-2px); }
        .pair-item { border-left-width: 4px; }
        .pair-general { border-left-color: #6366f1; background-color: #f5f3ff; }
        .pair-elective { border-left-color: #f59e0b; background-color: #fffbeb; }
        .pair-lang { border-left-color: #10b981; background-color: #ecfdf5; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade { animation: fadeIn 0.4s ease-out forwards; }
    </style>
</head>
<body class="text-stone-800">

    <!-- Chosen Palette: Warm Stone, Indigo Accents, Soft Emerald/Amber for types -->
    <!-- Application Structure Plan:
         1. Navigation: Switch between "Register" and "My Schedule".
         2. Search: Single global search that affects the table and identifies the active student.
         3. Student Register: Detailed table of electives.
         4. Personal Schedule View:
            - Week Selector (24-27).
            - Personalized grid of classes based on the chosen student's electives.
            - Logical mapping: General subjects (all) + Electives (matches table) + Languages (matches table).
         Rationale: Users need to see their specific burden. Merging the schedule from images with the register data creates a "Smart Calendar".
    -->
    <!-- Visualization & Content Choices:
         1. Schedule -> Organize -> Interactive Grid -> JS Filtering -> Shows only what's relevant to the person.
         2. Electives -> Compare -> Tag-based Table -> Visual clarity.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <nav class="bg-white border-b border-stone-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center gap-2">
                    <span class="text-2xl">üéì</span>
                    <span class="text-xl font-bold text-stone-900 tracking-tight">–ù–∞–≤—á–∞–ª—å–Ω–∏–π –ü–æ—Ä—Ç–∞–ª 2026</span>
                </div>
                <div class="flex items-center gap-4">
                    <button onclick="switchView('register')" id="nav-register" class="px-4 py-2 rounded-lg font-medium text-indigo-600 bg-indigo-50 transition">–†–µ—î—Å—Ç—Ä</button>
                    <button onclick="switchView('schedule')" id="nav-schedule" class="px-4 py-2 rounded-lg font-medium text-stone-500 hover:text-indigo-600 transition">–ú—ñ–π –†–æ–∑–∫–ª–∞–¥</button>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Search Bar (Global) -->
        <div class="mb-10 bg-white p-6 rounded-2xl shadow-sm border border-stone-200">
            <h2 class="text-sm font-semibold text-stone-500 uppercase tracking-wider mb-3">–ü–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–∞—Ü—ñ—è</h2>
            <div class="relative max-w-xl">
                <input type="text" id="global-search" oninput="handleSearch()" placeholder="–í–≤–µ–¥—ñ—Ç—å –ü–Ü–ë —Å—Ç—É–¥–µ–Ω—Ç–∞ –¥–ª—è —Ä–æ–∑–∫–ª–∞–¥—É..." 
                    class="w-full pl-12 pr-4 py-3 border border-stone-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition shadow-sm">
                <span class="absolute left-4 top-3.5 text-xl">üë§</span>
            </div>
            <p id="search-feedback" class="mt-2 text-sm text-stone-500 italic">–ü–æ—á–Ω—ñ—Ç—å –≤–≤–æ–¥–∏—Ç–∏ –ø—Ä—ñ–∑–≤–∏—â–µ, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ —Å–≤—ñ–π —Ä–æ–∑–∫–ª–∞–¥</p>
        </div>

        <!-- View: Register -->
        <div id="view-register" class="animate-fade">
            <div class="mb-6 flex justify-between items-end">
                <div>
                    <h1 class="text-3xl font-bold text-stone-900">–†–µ—î—Å—Ç—Ä –≤–∏–±—ñ—Ä–∫–æ–≤–∏—Ö –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω</h1>
                    <p class="text-stone-500">–°–ø–∏—Å–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ —Ç–∞ –æ–±—Ä–∞–Ω—ñ –Ω–∏–º–∏ –ø—Ä–µ–¥–º–µ—Ç–∏ –Ω–∞ 2026 —Ä—ñ–∫</p>
                </div>
                <div class="text-right">
                    <span class="text-xs bg-stone-200 px-2 py-1 rounded text-stone-600 font-bold uppercase">–í—Å—å–æ–≥–æ: <span id="reg-count">0</span></span>
                </div>
            </div>

            <div class="bg-white rounded-2xl shadow-sm border border-stone-200 overflow-hidden">
                <div class="overflow-x-auto custom-scroll">
                    <table class="w-full text-left border-collapse">
                        <thead>
                            <tr class="bg-stone-50 text-stone-500 text-xs uppercase border-b border-stone-200">
                                <th class="p-4 w-12 text-center">‚Ññ</th>
                                <th class="p-4">–°—Ç—É–¥–µ–Ω—Ç</th>
                                <th class="p-4">–î–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏</th>
                                <th class="p-4 text-center">–î—ñ—è</th>
                            </tr>
                        </thead>
                        <tbody id="reg-table-body" class="divide-y divide-stone-100 text-sm">
                            <!-- JS populated -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- View: Schedule -->
        <div id="view-schedule" class="hidden animate-fade">
            <div id="no-student-selected" class="text-center py-20 bg-stone-100 rounded-3xl border-2 border-dashed border-stone-300">
                <span class="text-6xl block mb-4">üîç</span>
                <h2 class="text-2xl font-bold text-stone-600">–°—Ç—É–¥–µ–Ω—Ç–∞ –Ω–µ –æ–±—Ä–∞–Ω–æ</h2>
                <p class="text-stone-500 mt-2">–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –ü–Ü–ë —É –ø–æ—à—É–∫—É –≤–∏—â–µ –∞–±–æ –æ–±–µ—Ä—ñ—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞ –∑ —Ä–µ—î—Å—Ç—Ä—É</p>
            </div>

            <div id="schedule-content" class="hidden">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-end mb-8 gap-4">
                    <div>
                        <h1 class="text-3xl font-bold text-stone-900">–ú—ñ–π —Ä–æ–∑–∫–ª–∞–¥ –ª–µ–∫—Ü—ñ–π</h1>
                        <p class="text-indigo-600 font-medium mt-1" id="active-student-name"></p>
                    </div>
                    <div class="flex gap-2 p-1 bg-stone-200 rounded-xl">
                        <button onclick="setWeek(24)" id="btn-w24" class="px-4 py-2 rounded-lg text-sm font-bold transition">–ù24</button>
                        <button onclick="setWeek(25)" id="btn-w25" class="px-4 py-2 rounded-lg text-sm font-bold transition">–í25</button>
                        <button onclick="setWeek(26)" id="btn-w26" class="px-4 py-2 rounded-lg text-sm font-bold transition">–ù26</button>
                        <button onclick="setWeek(27)" id="btn-w27" class="px-4 py-2 rounded-lg text-sm font-bold transition">–í27</button>
                    </div>
                </div>

                <div id="schedule-grid" class="schedule-grid">
                    <!-- JS populated daily cards -->
                </div>
            </div>
        </div>

    </main>

    <script>
        // --- DATA ---
        const students = [
            { id: 1, name: "–ë–µ–ª—å—Ç—é–∫–æ–≤–∞ –ê–Ω–∞—Å—Ç–∞—Å—ñ—è –î–º–∏—Ç—Ä—ñ–≤–Ω–∞", electives: ["–ù—ñ–º–µ—Ü—å–∫–∞", "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è", "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è"] },
            { id: 2, name: "–í–µ–ª–∏–∫–æ–∫–æ–Ω—å –î–∞—Ä'—è –ê–Ω–¥—Ä—ñ—ó–≤–Ω–∞", electives: ["–§—Ä–∞–Ω—Ü—É–∑—å–∫–∞", "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è", "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ"] },
            { id: 3, name: "–ì–∞–ª–∞–±—É–¥—Å—å–∫–∞ –°–æ—Ñ—ñ—è –ö–æ—Å—Ç—è–Ω—Ç–∏–Ω—ñ–≤–Ω–∞", electives: ["–ü–æ–ª—å—Å—å–∫–∞", "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è", "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ"] },
            { id: 4, name: "–ì—ñ—Ç–∫—ñ—Å –Ü–ª–ª—è –ú–∏—Ö–∞–π–ª–æ–≤–∏—á", electives: ["–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è", "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ", "–ë–ó–í–ü"] },
            { id: 5, name: "–ì–æ—Ä–¥—ñ—î–Ω–∫–æ –ö–∞—Ç–µ—Ä–∏–Ω–∞ –í–æ–ª–æ–¥–∏–º–∏—Ä—ñ–≤–Ω–∞", electives: ["–§—Ä–∞–Ω—Ü—É–∑—å–∫–∞", "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è", "–°–æ—Ü—ñ–æ–ª–æ–≥—ñ—è"] },
            { id: 6, name: "–ì—É–º–µ–Ω—é–∫ –ê–Ω–Ω–∞ –í–æ–ª–æ–¥–∏–º–∏—Ä—ñ–≤–Ω–∞", electives: ["–ù—ñ–º–µ—Ü—å–∫–∞", "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è", "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ"] },
            { id: 7, name: "–ñ–∏–¥—á–µ–Ω–∫–æ –ê–Ω–∞—Å—Ç–∞—Å—ñ—è –ö–æ—Å—Ç—è–Ω—Ç–∏–Ω—ñ–≤–Ω–∞", electives: ["–ù—ñ–º–µ—Ü—å–∫–∞", "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è", "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ"] },
            { id: 8, name: "–ö–µ–ª—å–≤–∏—á –ö–∞—Ç–µ—Ä–∏–Ω–∞ –ö–æ—Å—Ç—è–Ω—Ç–∏–Ω—ñ–≤–Ω–∞", electives: ["–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è", "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è", "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ"] },
            { id: 9, name: "–ö–∏—Å–ª–µ–Ω–∫–æ –ù–∞—Ç–∞–ª—ñ—è –Ü–≤–∞–Ω—ñ–≤–Ω–∞", electives: ["–§—Ä–∞–Ω—Ü—É–∑—å–∫–∞", "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è", "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ"] },
            { id: 10, name: "–ö–ª—ñ—á—É–∫ –ú–∏—Ö–∞–π–ª–æ –í–∞—Å–∏–ª—å–æ–≤–∏—á", electives: ["–ù—ñ–º–µ—Ü—å–∫–∞", "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è", "–ë–ó–í–ü"] },
            { id: 11, name: "–ö–æ–ª–æ–¥—ñ–π –Æ–ª—ñ—è –í–∞—Å–∏–ª—ñ–≤–Ω–∞", electives: ["–ù—ñ–º–µ—Ü—å–∫–∞", "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è", "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ"] },
            { id: 12, name: "–ö–æ—Ö–∞–Ω –û–ª–µ–∫—Å—ñ–π –í—ñ—Ç–∞–ª—ñ–π–æ–≤–∏—á", electives: ["–ù—ñ–º–µ—Ü—å–∫–∞", "–ë–ó–í–ü", "–ö–∏—Ç–∞–π—Å—å–∫–∞"] },
            { id: 13, name: "–ú–∞–π –î–µ–Ω–∏—Å –í—ñ–∫—Ç–æ—Ä–æ–≤–∏—á", electives: ["–ù—ñ–º–µ—Ü—å–∫–∞", "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ", "–ë–ó–í–ü"] },
            { id: 14, name: "–ú–∞—Ä—Ç–∏–Ω –ú–∞–∫—Å–∏–º –ê–Ω–¥—Ä—ñ–π–æ–≤–∏—á", electives: ["–§—Ä–∞–Ω—Ü—É–∑—å–∫–∞", "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ", "–ë–ó–í–ü"] },
            { id: 15, name: "–ú–∞—Å—è—î–≤ –Ø—Ä–æ—Å–ª–∞–≤ –û–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á", electives: ["–ù—ñ–º–µ—Ü—å–∫–∞", "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è", "–ë–ó–í–ü"] },
            { id: 16, name: "–ú–æ–≥–∏–ª—è–Ω—Å—å–∫–∞ –°–æ—Ñ—ñ—è –û–ª–µ–≥—ñ–≤–Ω–∞", electives: ["–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è", "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ", "–ö–∏—Ç–∞–π—Å—å–∫–∞"] },
            { id: 17, name: "–ú—É—Ä—ñ–Ω –ê–Ω–¥—Ä—ñ–π –û–ª–µ–∫—Å—ñ–π–æ–≤–∏—á", electives: ["–§—Ä–∞–Ω—Ü—É–∑—å–∫–∞", "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ", "–ë–ó–í–ü"] },
            { id: 18, name: "–ü–µ—Ç—Ä–∏—á–∫–∞ –í–∞–ª–µ—Ä—ñ—è –°–µ—Ä–≥—ñ—ó–≤–Ω–∞", electives: ["–§—Ä–∞–Ω—Ü—É–∑—å–∫–∞", "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è", "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ"] },
            { id: 19, name: "–ü–∏–ª–∏–ø–µ–Ω–∫–æ –î–∞–Ω—ñ—ó–ª –û–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á", electives: ["–ù—ñ–º–µ—Ü—å–∫–∞", "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ", "–ë–ó–í–ü"] },
            { id: 20, name: "–ü–æ–ø—Ä–∞–≤–∫–∞ –ê–Ω–∞—Å—Ç–∞—Å—ñ—è –Æ—Ä—ñ—ó–≤–Ω–∞", electives: ["–ü–æ–ª—å—Å—å–∫–∞", "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è", "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ"] },
            { id: 21, name: "–†–∏–∂—É–∫ –ê–Ω–Ω–∞ –°–µ—Ä–≥—ñ—ó–≤–Ω–∞", electives: ["–§—Ä–∞–Ω—Ü—É–∑—å–∫–∞", "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è", "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è"] },
            { id: 22, name: "–°–æ–ª—è—Ä–∏–∫ –í–ª–∞–¥–∏—Å–ª–∞–≤ –Ø—Ä–æ—Å–ª–∞–≤–æ–≤–∏—á", electives: ["–ù—ñ–º–µ—Ü—å–∫–∞", "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è", "–ë–ó–í–ü"] },
            { id: 23, name: "–°—Ç–µ–ø–∞–Ω–µ–Ω–∫–æ –ú–∞–∫—Å–∏–º –Æ—Ä—ñ–π–æ–≤–∏—á", electives: ["–ü–æ–ª—å—Å—å–∫–∞", "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ", "–ë–ó–í–ü"] },
            { id: 24, name: "–¢–∏–º–æ—â—É–∫ –í–ª–∞–¥–∏—Å–ª–∞–≤ –í–æ–ª–æ–¥–∏–º–∏—Ä–æ–≤–∏—á", electives: ["–§—Ä–∞–Ω—Ü—É–∑—å–∫–∞", "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ", "–°–æ—Ü—ñ–æ–ª–æ–≥—ñ—è"] },
            { id: 25, name: "–¢—Ä–æ—Ü—å–∫–∞ –î—ñ–∞–Ω–∞ –†—É—Å–ª–∞–Ω—ñ–≤–Ω–∞", electives: ["–ù—ñ–º–µ—Ü—å–∫–∞", "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è", "–°–æ—Ü—ñ–æ–ª–æ–≥—ñ—è"] },
            { id: 26, name: "–£—Å—Ç–∏–º–µ–Ω–∫–æ –î–∞—è–Ω–∞ –í—ñ—Ç–∞–ª—ñ—ó–≤–Ω–∞", electives: ["–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è", "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è", "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ"] },
            { id: 27, name: "–ß–µ—Ä–Ω—è–∫ –î—ñ–∞–Ω–∞ –Ü–≤–∞–Ω—ñ–≤–Ω–∞", electives: ["–§—Ä–∞–Ω—Ü—É–∑—å–∫–∞", "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è", "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è"] },
            { id: 28, name: "–ß—É–ø—Ä–∏–Ω–∞ –ê—Ä—ñ–Ω–∞ –û–ª–µ–∫—Å—ñ—ó–≤–Ω–∞", electives: ["–§—Ä–∞–Ω—Ü—É–∑—å–∫–∞", "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è", "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ"] },
            { id: 29, name: "–®–µ–ª–µ–ø–∞ –ú–∏—Ö–∞–π–ª–æ –í–ª–∞–¥–∏—Å–ª–∞–≤–æ–≤–∏—á", electives: ["–ü–æ–ª—å—Å—å–∫–∞", "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ", "–ë–ó–í–ü"] }
        ];

        // Global Schedule (Condensed from screenshots)
        // types: 'general' (all), 'elective' (by name), 'lang' (any foreign lang)
        const scheduleData = {
            24: [ // Lower Week
                { day: "–ü–æ–Ω–µ–¥—ñ–ª–æ–∫", date: "09.02.2026", pairs: [
                    { time: "10:00-11:15", num: 2, subj: "–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ –õ", type: "general" },
                    { time: "11:30-12:45", num: 3, subj: "–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ –õ", type: "general" }
                ]},
                { day: "–í—ñ–≤—Ç–æ—Ä–æ–∫", date: "10.02.2026", pairs: [
                    { time: "08:30-09:45", num: 1, subj: "–ü—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ –õ", type: "general" },
                    { time: "10:00-11:15", num: 2, subj: "–ü—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ –õ", type: "general" },
                    { time: "11:30-12:45", num: 3, subj: "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è –í –õ", type: "elective", map: "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è" },
                    { time: "13:00-14:15", num: 4, subj: "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è –í –õ", type: "elective", map: "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è" }
                ]},
                { day: "–°–µ—Ä–µ–¥–∞", date: "11.02.2026", pairs: [
                    { time: "10:00-11:15", num: 2, subj: "–ï–∫–∞—É–Ω—Ç–∏–Ω–≥-2 –õ", type: "general" },
                    { time: "11:30-12:45", num: 3, subj: "–ï–∫–∞—É–Ω—Ç–∏–Ω–≥-2 –õ", type: "general" },
                    { time: "13:00-14:15", num: 4, subj: "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è –í –õ", type: "elective", map: "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è" },
                    { time: "14:30-15:45", num: 5, subj: "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è –í –õ", type: "elective", map: "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è" }
                ]},
                { day: "–ß–µ—Ç–≤–µ—Ä", date: "12.02.2026", pairs: [
                    { time: "10:00-11:15", num: 2, subj: "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ –í –õ", type: "elective", map: "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ" },
                    { time: "11:30-12:45", num: 3, subj: "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ –í –õ", type: "elective", map: "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ" },
                    { time: "13:00-14:15", num: 4, subj: "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è –í –õ", type: "elective", map: "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è" },
                    { time: "14:30-15:45", num: 5, subj: "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è –í –õ", type: "elective", map: "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è" }
                ]},
                { day: "–ü'—è—Ç–Ω–∏—Ü—è", date: "13.02.2026", pairs: [
                    { time: "11:30-12:45", num: 3, subj: "–°–æ—Ü—ñ–æ–ª–æ–≥—ñ—è –í –õ", type: "elective", map: "–°–æ—Ü—ñ–æ–ª–æ–≥—ñ—è" },
                    { time: "13:00-14:15", num: 4, subj: "–°–æ—Ü—ñ–æ–ª–æ–≥—ñ—è –í –õ", type: "elective", map: "–°–æ—Ü—ñ–æ–ª–æ–≥—ñ—è" }
                ]},
                { day: "–°—É–±–æ—Ç–∞", date: "14.02.2026", pairs: [
                    { time: "10:00-11:15", num: 2, subj: "–¢–µ–æ—Ä–µ—Ç–∏—á–Ω–∞ –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –ë–ó–í–ü –í –õ", type: "elective", map: "–ë–ó–í–ü" },
                    { time: "11:30-12:45", num: 3, subj: "–¢–µ–æ—Ä–µ—Ç–∏—á–Ω–∞ –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –ë–ó–í–ü –í –õ", type: "elective", map: "–ë–ó–í–ü" }
                ]}
            ],
            25: [ // Upper Week
                { day: "–ü–æ–Ω–µ–¥—ñ–ª–æ–∫", date: "16.02.2026", pairs: [
                    { time: "08:30-09:45", num: 1, subj: "–ü—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ –õ", type: "general" },
                    { time: "10:00-11:15", num: 2, subj: "–ü—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ –õ", type: "general" },
                    { time: "11:30-12:45", num: 3, subj: "–ü—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ –õ", type: "general" }
                ]},
                { day: "–í—ñ–≤—Ç–æ—Ä–æ–∫", date: "17.02.2026", pairs: [
                    { time: "10:00-11:15", num: 2, subj: "–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ –õ", type: "general" },
                    { time: "11:30-12:45", num: 3, subj: "–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ –õ", type: "general" }
                ]},
                { day: "–°–µ—Ä–µ–¥–∞", date: "18.02.2026", pairs: [
                    { time: "10:00-11:15", num: 2, subj: "–ï–∫–∞—É–Ω—Ç–∏–Ω–≥-2 –õ", type: "general" },
                    { time: "11:30-12:45", num: 3, subj: "–ï–∫–∞—É–Ω—Ç–∏–Ω–≥-2 –õ", type: "general" }
                ]},
                { day: "–ß–µ—Ç–≤–µ—Ä", date: "19.02.2026", pairs: [
                    { time: "08:30-09:45", num: 1, subj: "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è –í –õ", type: "elective", map: "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è" },
                    { time: "10:00-11:15", num: 2, subj: "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è –í –õ", type: "elective", map: "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è" }
                ]},
                { day: "–ü'—è—Ç–Ω–∏—Ü—è", date: "20.02.2026", pairs: [
                    { time: "10:00-11:15", num: 2, subj: "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ –í –õ", type: "elective", map: "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ" },
                    { time: "11:30-12:45", num: 3, subj: "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ –í –õ", type: "elective", map: "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ" },
                    { time: "13:00-14:15", num: 4, subj: "–°–æ—Ü—ñ–æ–ª–æ–≥—ñ—è –í –õ", type: "elective", map: "–°–æ—Ü—ñ–æ–ª–æ–≥—ñ—è" },
                    { time: "14:30-15:45", num: 5, subj: "–°–æ—Ü—ñ–æ–ª–æ–≥—ñ—è –í –õ", type: "elective", map: "–°–æ—Ü—ñ–æ–ª–æ–≥—ñ—è" }
                ]},
                { day: "–°—É–±–æ—Ç–∞", date: "21.02.2026", pairs: [
                    { time: "10:00-11:15", num: 2, subj: "–¢–µ–æ—Ä–µ—Ç–∏—á–Ω–∞ –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –ë–ó–í–ü –í –õ", type: "elective", map: "–ë–ó–í–ü" },
                    { time: "11:30-12:45", num: 3, subj: "–¢–µ–æ—Ä–µ—Ç–∏—á–Ω–∞ –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –ë–ó–í–ü –í –õ", type: "elective", map: "–ë–ó–í–ü" }
                ]}
            ],
            26: [ // Lower Week 2
                { day: "–ü–æ–Ω–µ–¥—ñ–ª–æ–∫", date: "23.02.2026", pairs: [
                    { time: "10:00-11:15", num: 2, subj: "–ö–∏—Ç–∞–π—Å—å–∫–∞ (–í –ø)", type: "elective", map: "–ö–∏—Ç–∞–π—Å—å–∫–∞" },
                    { time: "11:30-12:45", num: 3, subj: "–ö–∏—Ç–∞–π—Å—å–∫–∞ (–í –ø)", type: "elective", map: "–ö–∏—Ç–∞–π—Å—å–∫–∞" },
                    { time: "13:00-14:15", num: 4, subj: "–Ü–Ω–æ–∑–µ–º–Ω–∞ –º–æ–≤–∞ –ø", type: "lang" },
                    { time: "14:30-15:45", num: 5, subj: "–ï–∫–∞—É–Ω—Ç–∏–Ω–≥-2 –õ", type: "general" },
                    { time: "16:00-17:15", num: 6, subj: "–ï–∫–∞—É–Ω—Ç–∏–Ω–≥-2 –õ", type: "general" }
                ]},
                { day: "–í—ñ–≤—Ç–æ—Ä–æ–∫", date: "24.02.2026", pairs: [
                    { time: "10:00-11:15", num: 2, subj: "–Ü–Ω–æ–∑–µ–º–Ω–∞ –º–æ–≤–∞ –ø", type: "lang" },
                    { time: "11:30-12:45", num: 3, subj: "–Ü–Ω–æ–∑–µ–º–Ω–∞ –º–æ–≤–∞ –ø", type: "lang" }
                ]},
                { day: "–°–µ—Ä–µ–¥–∞", date: "25.02.2026", pairs: [
                    { time: "08:30-09:45", num: 1, subj: "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è –í –õ", type: "elective", map: "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è" },
                    { time: "10:00-11:15", num: 2, subj: "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è –í –õ", type: "elective", map: "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è" },
                    { time: "11:30-12:45", num: 3, subj: "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ –í –õ", type: "elective", map: "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ" },
                    { time: "13:00-14:15", num: 4, subj: "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ –í –õ", type: "elective", map: "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ" }
                ]},
                { day: "–ß–µ—Ç–≤–µ—Ä", date: "26.02.2026", pairs: [
                    { time: "08:30-09:45", num: 1, subj: "–°–æ—Ü—ñ–æ–ª–æ–≥—ñ—è –í –õ", type: "elective", map: "–°–æ—Ü—ñ–æ–ª–æ–≥—ñ—è" },
                    { time: "10:00-11:15", num: 2, subj: "–°–æ—Ü—ñ–æ–ª–æ–≥—ñ—è –í –õ", type: "elective", map: "–°–æ—Ü—ñ–æ–ª–æ–≥—ñ—è" },
                    { time: "11:30-12:45", num: 3, subj: "–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ –õ", type: "general" },
                    { time: "13:00-14:15", num: 4, subj: "–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ –õ", type: "general" }
                ]},
                { day: "–ü'—è—Ç–Ω–∏—Ü—è", date: "27.02.2026", pairs: [
                    { time: "08:30-09:45", num: 1, subj: "–ü—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ –õ", type: "general" },
                    { time: "10:00-11:15", num: 2, subj: "–ü—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ –õ", type: "general" },
                    { time: "11:30-12:45", num: 3, subj: "–ü—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ –õ", type: "general" },
                    { time: "13:00-14:15", num: 4, subj: "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è –í –õ", type: "elective", map: "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è" },
                    { time: "14:30-15:45", num: 5, subj: "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è –í –õ", type: "elective", map: "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è" }
                ]}
            ],
            27: [ // Upper Week 2
                { day: "–ü–æ–Ω–µ–¥—ñ–ª–æ–∫", date: "02.03.2026", pairs: [
                    { time: "10:00-11:15", num: 2, subj: "–ö–∏—Ç–∞–π—Å—å–∫–∞ (–í –ø)", type: "elective", map: "–ö–∏—Ç–∞–π—Å—å–∫–∞" },
                    { time: "11:30-12:45", num: 3, subj: "–ö–∏—Ç–∞–π—Å—å–∫–∞ (–í –ø)", type: "elective", map: "–ö–∏—Ç–∞–π—Å—å–∫–∞" },
                    { time: "13:00-14:15", num: 4, subj: "–Ü–Ω–æ–∑–µ–º–Ω–∞ –º–æ–≤–∞ –ø", type: "lang" },
                    { time: "14:30-15:45", num: 5, subj: "–Ü–Ω–æ–∑–µ–º–Ω–∞ –º–æ–≤–∞ –ø", type: "lang" }
                ]},
                { day: "–í—ñ–≤—Ç–æ—Ä–æ–∫", date: "03.03.2026", pairs: [
                    { time: "11:30-12:45", num: 3, subj: "–Ü–Ω–æ–∑–µ–º–Ω–∞ –º–æ–≤–∞ –ø", type: "lang" },
                    { time: "13:00-14:15", num: 4, subj: "–ï–∫–∞—É–Ω—Ç–∏–Ω–≥-2 –õ", type: "general" },
                    { time: "14:30-15:45", num: 5, subj: "–ï–∫–∞—É–Ω—Ç–∏–Ω–≥-2 –õ", type: "general" }
                ]},
                { day: "–°–µ—Ä–µ–¥–∞", date: "04.03.2026", pairs: [
                    { time: "08:30-09:45", num: 1, subj: "–ü—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ –õ", type: "general" },
                    { time: "10:00-11:15", num: 2, subj: "–ü—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ –õ", type: "general" },
                    { time: "11:30-12:45", num: 3, subj: "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ –í –õ", type: "elective", map: "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ" },
                    { time: "13:00-14:15", num: 4, subj: "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ –í –õ", type: "elective", map: "–°–æ—Ü—ñ–∞–ª—å–Ω–µ –ø—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ" }
                ]},
                { day: "–ß–µ—Ç–≤–µ—Ä", date: "05.03.2026", pairs: [
                    { time: "08:30-09:45", num: 1, subj: "–°–æ—Ü—ñ–æ–ª–æ–≥—ñ—è –í –õ", type: "elective", map: "–°–æ—Ü—ñ–æ–ª–æ–≥—ñ—è" },
                    { time: "10:00-11:15", num: 2, subj: "–°–æ—Ü—ñ–æ–ª–æ–≥—ñ—è –í –õ", type: "elective", map: "–°–æ—Ü—ñ–æ–ª–æ–≥—ñ—è" },
                    { time: "11:30-12:45", num: 3, subj: "–ü—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ –õ", type: "general" },
                    { time: "13:00-14:15", num: 4, subj: "–ü—ñ–¥–ø—Ä–∏—î–º–Ω–∏—Ü—Ç–≤–æ –õ", type: "general" }
                ]},
                { day: "–ü'—è—Ç–Ω–∏—Ü—è", date: "06.03.2026", pairs: [
                    { time: "08:30-09:45", num: 1, subj: "–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ –õ", type: "general" },
                    { time: "10:00-11:15", num: 2, subj: "–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ –õ", type: "general" },
                    { time: "11:30-12:45", num: 3, subj: "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è –í –õ", type: "elective", map: "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è" },
                    { time: "13:00-14:15", num: 4, subj: "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è –í –õ", type: "elective", map: "–ü–æ–ª—ñ—Ç–æ–ª–æ–≥—ñ—è" },
                    { time: "14:30-15:45", num: 5, subj: "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è –í –õ", type: "elective", map: "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è" },
                    { time: "16:00-17:15", num: 6, subj: "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è –í –õ", type: "elective", map: "–ü—É–±–ª—ñ—á–Ω–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è" }
                ]}
            ]
        };

        // --- STATE ---
        let state = {
            currentView: 'register',
            selectedStudent: null,
            activeWeek: 24,
            searchTerm: ''
        };

        // --- CORE FUNCTIONS ---

        function init() {
            renderRegister();
            updateRegisterCount();
        }

        function switchView(view) {
            state.currentView = view;
            
            const vReg = document.getElementById('view-register');
            const vSch = document.getElementById('view-schedule');
            const navReg = document.getElementById('nav-register');
            const navSch = document.getElementById('nav-schedule');

            if (view === 'register') {
                vReg.classList.remove('hidden');
                vSch.classList.add('hidden');
                navReg.classList.add('bg-indigo-50', 'text-indigo-600');
                navSch.classList.remove('bg-indigo-50', 'text-indigo-600');
                navSch.classList.add('text-stone-500');
            } else {
                vReg.classList.add('hidden');
                vSch.classList.remove('hidden');
                navSch.classList.add('bg-indigo-50', 'text-indigo-600');
                navReg.classList.remove('bg-indigo-50', 'text-indigo-600');
                navReg.classList.add('text-stone-500');
                renderPersonalSchedule();
            }
        }

        function handleSearch() {
            state.searchTerm = document.getElementById('global-search').value.toLowerCase();
            const found = students.find(s => s.name.toLowerCase().includes(state.searchTerm) && state.searchTerm.length > 5);
            
            if (found) {
                state.selectedStudent = found;
                document.getElementById('search-feedback').innerHTML = `‚úÖ –ó–Ω–∞–π–¥–µ–Ω–æ: <span class="font-bold text-indigo-600">${found.name}</span>. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ú—ñ–π –†–æ–∑–∫–ª–∞–¥"`;
            } else {
                document.getElementById('search-feedback').innerHTML = `–ü–æ—á–Ω—ñ—Ç—å –≤–≤–æ–¥–∏—Ç–∏ –ø—Ä—ñ–∑–≤–∏—â–µ, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ —Å–≤—ñ–π —Ä–æ–∑–∫–ª–∞–¥`;
            }
            renderRegister();
        }

        function selectStudent(id) {
            const s = students.find(x => x.id === id);
            state.selectedStudent = s;
            document.getElementById('global-search').value = s.name;
            handleSearch();
            switchView('schedule');
        }

        function setWeek(w) {
            state.activeWeek = w;
            renderPersonalSchedule();
        }

        function renderRegister() {
            const body = document.getElementById('reg-table-body');
            body.innerHTML = '';
            
            const filtered = students.filter(s => s.name.toLowerCase().includes(state.searchTerm));

            filtered.forEach(s => {
                const tr = document.createElement('tr');
                tr.className = "hover:bg-stone-50 transition border-b border-stone-100 last:border-0";
                
                const isSelected = state.selectedStudent && state.selectedStudent.id === s.id;
                if (isSelected) tr.classList.add('bg-indigo-50/30');

                tr.innerHTML = `
                    <td class="p-4 text-center font-mono text-stone-400 text-xs">${s.id}</td>
                    <td class="p-4 font-bold text-stone-800">${s.name}</td>
                    <td class="p-4">
                        <div class="flex flex-wrap gap-1">
                            ${s.electives.map(e => {
                                let colorClass = 'bg-stone-100 text-stone-600';
                                if (e.includes('—ñ–Ω–æ–∑') || ['–ù—ñ–º–µ—Ü—å–∫–∞','–ü–æ–ª—å—Å—å–∫–∞','–§—Ä–∞–Ω—Ü—É–∑—å–∫–∞','–ö–∏—Ç–∞–π—Å—å–∫–∞'].includes(e)) colorClass = 'bg-emerald-50 text-emerald-700 border border-emerald-100';
                                else colorClass = 'bg-amber-50 text-amber-700 border border-amber-100';
                                return `<span class="px-2 py-0.5 rounded-full text-[10px] uppercase font-bold ${colorClass}">${e}</span>`;
                            }).join('')}
                        </div>
                    </td>
                    <td class="p-4 text-center">
                        <button onclick="selectStudent(${s.id})" class="text-xs font-bold text-indigo-600 hover:underline">–†–æ–∑–∫–ª–∞–¥ ‚Üí</button>
                    </td>
                `;
                body.appendChild(tr);
            });
        }

        function renderPersonalSchedule() {
            const noSel = document.getElementById('no-student-selected');
            const content = document.getElementById('schedule-content');
            const grid = document.getElementById('schedule-grid');
            
            if (!state.selectedStudent) {
                noSel.classList.remove('hidden');
                content.classList.add('hidden');
                return;
            }

            noSel.classList.add('hidden');
            content.classList.remove('hidden');
            document.getElementById('active-student-name').textContent = `–°—Ç—É–¥–µ–Ω—Ç: ${state.selectedStudent.name}`;

            // Update buttons
            [24, 25, 26, 27].forEach(w => {
                const btn = document.getElementById(`btn-w${w}`);
                if (state.activeWeek === w) {
                    btn.className = "px-4 py-2 rounded-lg text-sm font-bold transition bg-white text-indigo-600 shadow-sm";
                } else {
                    btn.className = "px-4 py-2 rounded-lg text-sm font-bold transition text-stone-500 hover:text-stone-800";
                }
            });

            grid.innerHTML = '';
            const weekData = scheduleData[state.activeWeek];

            weekData.forEach(day => {
                // Filter pairs for this student
                const personalPairs = day.pairs.filter(p => {
                    if (p.type === 'general') return true;
                    if (p.type === 'lang') {
                        // Language pair - check if student has any lang elective
                        return state.selectedStudent.electives.some(el => ['–ù—ñ–º–µ—Ü—å–∫–∞','–ü–æ–ª—å—Å—å–∫–∞','–§—Ä–∞–Ω—Ü—É–∑—å–∫–∞'].includes(el));
                    }
                    if (p.type === 'elective') {
                        return state.selectedStudent.electives.includes(p.map);
                    }
                    return false;
                });

                if (personalPairs.length > 0) {
                    const card = document.createElement('div');
                    card.className = "bg-white rounded-2xl p-6 shadow-sm border border-stone-200 day-card animate-fade";
                    card.innerHTML = `
                        <div class="flex justify-between items-center mb-4 pb-2 border-b border-stone-100">
                            <h3 class="font-bold text-stone-900">${day.day}</h3>
                            <span class="text-xs font-bold text-stone-400">${day.date}</span>
                        </div>
                        <div class="space-y-3">
                            ${personalPairs.map(p => {
                                let typeLabel = p.type === 'general' ? '–ó–∞–≥–∞–ª—å–Ω–∞' : (p.type === 'lang' ? '–ú–æ–≤–∞' : '–í–∏–±—ñ—Ä–∫–æ–≤–∞');
                                let typeClass = p.type === 'general' ? 'pair-general' : (p.type === 'lang' ? 'pair-lang' : 'pair-elective');
                                return `
                                    <div class="pair-item ${typeClass} p-3 rounded-lg border-l-4">
                                        <div class="flex justify-between text-[10px] font-bold text-stone-400 mb-1">
                                            <span>${p.num} –ü–ê–†–ê | ${p.time}</span>
                                            <span class="uppercase">${typeLabel}</span>
                                        </div>
                                        <div class="text-sm font-bold text-stone-800">${p.subj}</div>
                                        <div class="text-[11px] text-stone-500 mt-1">üñ•Ô∏è online</div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    `;
                    grid.appendChild(card);
                }
            });

            if (grid.innerHTML === '') {
                grid.innerHTML = `<div class="col-span-full py-20 text-center text-stone-400">–ù–∞ —Ü—å–æ–º—É —Ç–∏–∂–Ω—ñ –∑–∞–Ω—è—Ç—å –Ω–µ–º–∞—î. –í—ñ–¥–ø–æ—á–∏–≤–∞–π—Ç–µ!</div>`;
            }
        }

        function updateRegisterCount() {
            document.getElementById('reg-count').textContent = students.length;
        }

        window.onload = init;
    </script>
</body>
</html>
